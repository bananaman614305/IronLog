<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0a0a0a">
<title>IronLog</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0a0a0a;--sur:#141414;--sur2:#1e1e1e;--bdr:#2a2a2a;--acc:#e8ff00;--txt:#f0f0f0;--mut:#666;--grn:#00e87a}
html{height:100%}
body{height:100%;background:var(--bg);color:var(--txt);font-family:'DM Sans',sans-serif;max-width:430px;margin:0 auto;display:flex;flex-direction:column;-webkit-tap-highlight-color:transparent;overflow:hidden}
#hdr{padding:16px 20px 0;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.logo{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:2px;color:var(--acc)}
.logo b{color:var(--txt);font-weight:400}
#page{flex:1;overflow-y:auto;padding:16px 20px 16px;-webkit-overflow-scrolling:touch}
#nav{flex-shrink:0;display:flex;background:#111;border-top:1px solid var(--bdr)}
.nb{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:10px 4px;background:none;border:none;color:var(--mut);font-size:9px;font-family:'DM Mono',monospace;letter-spacing:1px;text-transform:uppercase;cursor:pointer}
.nb.on{color:var(--acc)}
.nb svg{width:20px;height:20px}
/* cards */
.streak{background:var(--sur);border:1px solid var(--bdr);border-radius:16px;padding:24px;margin-bottom:16px}
.sl{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--mut);text-transform:uppercase;margin-bottom:6px}
.sn{font-family:'Bebas Neue',sans-serif;font-size:72px;line-height:1;color:var(--acc)}
.ss{color:var(--mut);font-size:13px;margin-top:4px}
.stitle{font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:2px;color:var(--mut);text-transform:uppercase;margin:20px 0 10px}
/* buttons */
.btn{display:block;width:100%;padding:15px;background:var(--acc);color:#000;border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:2px;cursor:pointer;text-align:center;margin-bottom:8px}
.btn.ghost{background:var(--sur);color:var(--txt);border:1px solid var(--bdr)}
/* session card */
.sc{background:var(--sur);border:1px solid var(--bdr);border-radius:12px;padding:14px;margin-bottom:8px;display:flex;align-items:center;gap:12px}
.si{width:40px;height:40px;background:var(--sur2);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.sn2{font-weight:500;font-size:14px}
.sm{font-size:11px;color:var(--mut);margin-top:2px;font-family:'DM Mono',monospace}
/* day tabs */
.dtabs{display:flex;gap:5px;overflow-x:auto;padding-bottom:6px;margin-bottom:16px;scrollbar-width:none}
.dtabs::-webkit-scrollbar{display:none}
.dt{flex-shrink:0;padding:7px 12px;background:var(--sur);border:1px solid var(--bdr);border-radius:20px;font-family:'DM Mono',monospace;font-size:10px;letter-spacing:1px;text-transform:uppercase;color:var(--mut);cursor:pointer}
.dt.on{background:var(--acc);color:#000;border-color:var(--acc)}
/* exercise grid */
.exgrid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}
.exb{padding:12px 8px;background:var(--sur);border:1px solid var(--bdr);border-radius:10px;color:var(--txt);font-size:12px;text-align:center;cursor:pointer}
/* logged exercise */
.lex{background:var(--sur);border:1px solid var(--bdr);border-radius:12px;padding:14px;margin-bottom:8px}
.lexh{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.lexn{font-weight:500;font-size:14px}
.delbtn{background:none;border:none;color:var(--mut);cursor:pointer;font-size:16px;padding:4px}
.pill{display:inline-block;padding:3px 7px;background:var(--sur2);border-radius:5px;font-family:'DM Mono',monospace;font-size:10px;color:var(--mut);margin:2px}
.pill.pr{background:#1a1500;color:var(--acc)}
.tag{display:inline-block;padding:2px 6px;border-radius:4px;font-size:9px;font-family:'DM Mono',monospace;text-transform:uppercase;background:#001a0a;color:var(--grn);margin-left:6px;vertical-align:middle}
/* set rows */
.setrow{display:flex;align-items:center;gap:6px;margin-bottom:8px}
.setlbl{font-family:'DM Mono',monospace;font-size:11px;color:var(--mut);width:38px;flex-shrink:0}
.setin{flex:1;padding:11px 8px;background:var(--sur);border:1px solid var(--bdr);border-radius:8px;color:var(--txt);font-family:'DM Mono',monospace;font-size:14px;text-align:center;outline:none;-webkit-appearance:none;appearance:none}
.setin:focus{border-color:var(--acc)}
.setx{color:var(--mut);font-size:13px;flex-shrink:0}
.addbtn{width:100%;padding:11px;background:none;border:1px dashed var(--bdr);border-radius:8px;color:var(--mut);font-size:13px;cursor:pointer;margin-bottom:14px}
/* history */
.hc{background:var(--sur);border:1px solid var(--bdr);border-radius:12px;padding:14px;margin-bottom:10px}
.hd{font-family:'DM Mono',monospace;font-size:10px;color:var(--acc);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.he{font-size:12px;color:var(--mut);padding:4px 0;border-bottom:1px solid var(--bdr)}
.he:last-child{border-bottom:none}
.he strong{color:var(--txt)}
/* PR grid */
.prgrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.prc{background:var(--sur);border:1px solid var(--bdr);border-radius:12px;padding:14px}
.pre{font-size:10px;color:var(--mut);font-family:'DM Mono',monospace;margin-bottom:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.prw{font-family:'Bebas Neue',sans-serif;font-size:30px;color:var(--acc);line-height:1}
.pru{font-size:13px;color:var(--mut)}
/* empty */
.empty{text-align:center;padding:50px 20px;color:var(--mut);font-size:14px}
.eico{font-size:44px;margin-bottom:10px}
/* modal */
#ov{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:999;display:none;align-items:flex-end;justify-content:center}
#ov.show{display:flex}
#modal{background:var(--sur);border-radius:20px 20px 0 0;padding:22px 18px 36px;width:100%;max-width:430px;border-top:1px solid var(--bdr);max-height:88vh;overflow-y:auto}
.mtitle{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;margin-bottom:16px}
.cusin{width:100%;padding:13px;background:var(--sur2);border:1px solid var(--bdr);border-radius:10px;color:var(--txt);font-size:16px;outline:none;margin-bottom:10px}
.cusin:focus{border-color:var(--acc)}
input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}
input[type=number]{-moz-appearance:textfield;appearance:textfield}
.statsrow{display:flex;gap:24px}
</style>
</head>
<body>

<div id="hdr">
  <div class="logo">IRON<b>LOG</b></div>
  <div id="datestr" style="font-family:'DM Mono',monospace;font-size:11px;color:var(--mut);letter-spacing:1px"></div>
</div>

<div id="page"></div>

<div id="nav">
  <button class="nb on" id="nb-home" onclick="go('home')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
    Home
  </button>
  <button class="nb" id="nb-log" onclick="go('log')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
    Log
  </button>
  <button class="nb" id="nb-history" onclick="go('history')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
    History
  </button>
  <button class="nb" id="nb-progress" onclick="go('progress')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
    PRs
  </button>
</div>

<div id="ov" onclick="ovClick(event)">
  <div id="modal">
    <div class="mtitle">Add Exercise</div>
    <div id="mbody"></div>
  </div>
</div>

<script>
(function(){
var EX=["Bench Press","Squat","Deadlift","Overhead Press","Barbell Row","Incline Press","Leg Press","Pull-Up","Dumbbell Curl","Tricep Pushdown","Lateral Raise","Romanian Deadlift","Hip Thrust","Cable Row","Custom"];
var DAYS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
var curView="home";
var sessions=[];
var activeDay=DAYS[new Date().getDay()===0?6:new Date().getDay()-1];
var wlog=[];
var selEx=null;
var cusName="";
var sets=[{w:"",r:""}];

try{sessions=JSON.parse(localStorage.getItem("il3")||"[]");}catch(e){sessions=[];}
function save(){try{localStorage.setItem("il3",JSON.stringify(sessions));}catch(e){}}
function uid(){return Math.random().toString(36).slice(2,9);}

function streak(){
  if(!sessions.length)return 0;
  var dates=[];
  for(var i=0;i<sessions.length;i++){if(dates.indexOf(sessions[i].date)<0)dates.push(sessions[i].date);}
  dates.sort();dates.reverse();
  var today=new Date().toDateString();
  var yest=new Date(Date.now()-86400000).toDateString();
  if(dates[0]!==today&&dates[0]!==yest)return 0;
  var n=0;
  for(var i=0;i<dates.length;i++){
    var exp=new Date(Date.now()-i*86400000).toDateString();
    if(dates[i]===exp)n++;else break;
  }
  return n;
}

function prs(){
  var p={};
  for(var i=0;i<sessions.length;i++){
    var exs=sessions[i].exercises||[];
    for(var j=0;j<exs.length;j++){
      var ss=exs[j].sets||[];
      for(var k=0;k<ss.length;k++){
        var w=parseFloat(ss[k].w);
        if(!isNaN(w)&&w>0&&(!p[exs[j].name]||w>p[exs[j].name]))p[exs[j].name]=w;
      }
    }
  }
  return p;
}

function isPR(name,w){var p=prs();return p[name]&&parseFloat(w)>=p[name];}

function go(v){
  curView=v;
  var ids=["home","log","history","progress"];
  for(var i=0;i<ids.length;i++){
    var el=document.getElementById("nb-"+ids[i]);
    if(el)el.className="nb"+(ids[i]===v?" on":"");
  }
  render();
}

function render(){
  document.getElementById("datestr").textContent=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();
  var p=document.getElementById("page");
  if(curView==="home")p.innerHTML=homeH();
  else if(curView==="log")p.innerHTML=logH();
  else if(curView==="history")p.innerHTML=histH();
  else if(curView==="progress")p.innerHTML=progH();
}

function homeH(){
  var s=streak();
  var h='<div class="streak"><div class="sl">Current Streak</div><div class="sn">'+s+'</div><div class="ss">'+(s===1?"day":"days")+' in a row</div></div>';
  h+='<button class="btn" onclick="go(\'log\')">+ START WORKOUT</button>';
  h+='<div class="stitle">Recent Sessions</div>';
  var rec=sessions.slice(0,5);
  if(!rec.length){
    h+='<div class="empty"><div class="eico">üèãÔ∏è</div>No sessions yet. Start your first workout!</div>';
  } else {
    for(var i=0;i<rec.length;i++){
      var s2=rec[i];
      h+='<div class="sc"><div class="si">üí™</div><div><div class="sn2">'+s2.day+'</div><div class="sm">'+s2.date+' ¬∑ '+(s2.exercises||[]).length+' exercises</div></div></div>';
    }
  }
  return h;
}

function logH(){
  var h='<div class="stitle">Today\'s Workout</div>';
  h+='<div class="dtabs">';
  for(var i=0;i<DAYS.length;i++){
    h+='<div class="dt'+(activeDay===DAYS[i]?" on":"")+'" onclick="setDay(\''+DAYS[i]+'\')">'+DAYS[i].slice(0,3)+'</div>';
  }
  h+='</div>';
  var p=prs();
  for(var i=0;i<wlog.length;i++){
    var ex=wlog[i];
    var topW=0;
    for(var j=0;j<ex.sets.length;j++){if(parseFloat(ex.sets[j].w)>topW)topW=parseFloat(ex.sets[j].w);}
    var pr=isPR(ex.name,topW);
    h+='<div class="lex"><div class="lexh"><div class="lexn">'+ex.name+(pr?'<span class="tag">PR</span>':'')+'</div><button class="delbtn" onclick="remEx(\''+ex.id+'\')">‚úï</button></div><div>';
    for(var j=0;j<ex.sets.length;j++){
      var s=ex.sets[j];
      h+='<span class="pill'+(isPR(ex.name,s.w)?" pr":"")+'">'+s.w+'lb √ó '+s.r+'</span>';
    }
    h+='</div></div>';
  }
  h+='<button class="btn ghost" onclick="openMod()">+ ADD EXERCISE</button>';
  if(wlog.length)h+='<button class="btn" onclick="finish()">‚úì FINISH WORKOUT</button>';
  else h+='<div class="empty" style="padding:30px 0"><div class="eico">üìã</div>Add your first exercise above</div>';
  return h;
}

function histH(){
  var h='<div class="stitle">Workout History</div>';
  if(!sessions.length)return h+'<div class="empty"><div class="eico">üìÖ</div>No workouts logged yet</div>';
  for(var i=0;i<sessions.length;i++){
    var s=sessions[i];
    h+='<div class="hc"><div class="hd">'+s.day+' ‚Äî '+s.date+'</div>';
    var exs=s.exercises||[];
    for(var j=0;j<exs.length;j++){
      var ex=exs[j];var best={w:0,r:0};
      var ss=ex.sets||[];
      for(var k=0;k<ss.length;k++){if(parseFloat(ss[k].w)>parseFloat(best.w))best=ss[k];}
      h+='<div class="he"><strong>'+ex.name+'</strong> ‚Äî '+ss.length+' sets ¬∑ best '+best.w+'lb √ó '+best.r+'</div>';
    }
    h+='</div>';
  }
  return h;
}

function progH(){
  var p=prs();var keys=Object.keys(p);
  var h='<div class="stitle">Personal Records</div>';
  if(!keys.length)return h+'<div class="empty"><div class="eico">üèÜ</div>Log workouts to track your PRs</div>';
  keys.sort(function(a,b){return p[b]-p[a];});
  h+='<div class="prgrid">';
  for(var i=0;i<keys.length;i++){
    h+='<div class="prc"><div class="pre">'+keys[i]+'</div><div class="prw">'+p[keys[i]]+' <span class="pru">lb</span></div></div>';
  }
  h+='</div>';
  if(sessions.length){
    var tot=0;for(var i=0;i<sessions.length;i++)tot+=(sessions[i].exercises||[]).length;
    h+='<div class="stitle">Stats</div><div class="streak"><div class="statsrow"><div><div class="sl">Sessions</div><div class="sn" style="font-size:48px">'+sessions.length+'</div></div><div><div class="sl">Exercises</div><div class="sn" style="font-size:48px">'+tot+'</div></div></div></div>';
  }
  return h;
}

function setDay(d){activeDay=d;render();}
function remEx(id){wlog=wlog.filter(function(e){return e.id!==id;});render();}

function finish(){
  if(!wlog.length)return;
  sessions.unshift({id:uid(),date:new Date().toDateString(),day:activeDay,exercises:JSON.parse(JSON.stringify(wlog))});
  save();wlog=[];go("history");
}

function openMod(){selEx=null;cusName="";sets=[{w:"",r:""}];showMod();}

function showMod(){
  document.getElementById("ov").className="show";
  var b=document.getElementById("mbody");
  if(!selEx){
    var h='<div class="exgrid">';
    for(var i=0;i<EX.length;i++){h+='<div class="exb" onclick="pickEx(\''+EX[i]+'\')">'+EX[i]+'</div>';}
    h+='</div><button class="btn ghost" onclick="closeMod()">Cancel</button>';
    b.innerHTML=h;
  } else {
    var isCus=selEx==="Custom";
    var h='<div style="font-family:\'Bebas Neue\',sans-serif;font-size:16px;letter-spacing:2px;margin-bottom:14px;color:var(--acc)">'+(isCus?"Custom Exercise":selEx)+'</div>';
    if(isCus)h+='<input class="cusin" id="cn" type="text" placeholder="Exercise name..." value="'+cusName+'" oninput="cusName=this.value">';
    h+='<div style="display:flex;gap:6px;margin-bottom:6px"><div style="width:44px;flex-shrink:0"></div><div style="flex:1;text-align:center;font-size:10px;color:var(--mut);font-family:\'DM Mono\',monospace">WEIGHT (lb)</div><div style="width:14px;flex-shrink:0"></div><div style="flex:1;text-align:center;font-size:10px;color:var(--mut);font-family:\'DM Mono\',monospace">REPS</div><div style="width:36px;flex-shrink:0"></div></div>';
    for(var i=0;i<sets.length;i++){
      var s=sets[i];
      h+='<div class="setrow"><div class="setlbl">SET '+(i+1)+'</div>';
      h+='<input class="setin" type="number" inputmode="decimal" placeholder="0" value="'+s.w+'" onchange="updS('+i+',\'w\',this.value)">';
      h+='<div class="setx">√ó</div>';
      h+='<input class="setin" type="number" inputmode="numeric" placeholder="0" value="'+s.r+'" onchange="updS('+i+',\'r\',this.value)">';
      h+=(sets.length>1?'<button class="delbtn" onclick="remS('+i+')">‚úï</button>':'<div style="width:36px"></div>');
      h+='</div>';
    }
    h+='<button class="addbtn" onclick="addS()">+ Add Set</button>';
    h+='<button class="btn" onclick="logEx()">LOG EXERCISE</button>';
    h+='<button class="btn ghost" onclick="backList()">‚Üê BACK</button>';
    b.innerHTML=h;
  }
}

function pickEx(ex){selEx=ex;showMod();}
function backList(){selEx=null;sets=[{w:"",r:""}];showMod();}
function addS(){sets.push({w:"",r:""});showMod();}
function remS(i){sets.splice(i,1);showMod();}
function updS(i,f,v){sets[i][f]=v;}

function logEx(){
  var name=selEx==="Custom"?cusName:selEx;
  if(!name)return;
  var valid=[];
  for(var i=0;i<sets.length;i++){if(sets[i].w||sets[i].r)valid.push({w:sets[i].w,r:sets[i].r});}
  if(!valid.length)return;
  wlog.push({id:uid(),name:name,sets:valid});
  closeMod();render();
}

function closeMod(){document.getElementById("ov").className="";}
function ovClick(e){if(e.target===document.getElementById("ov"))closeMod();}

// expose globals
window.go=go;window.setDay=setDay;window.remEx=remEx;window.finish=finish;
window.openMod=openMod;window.pickEx=pickEx;window.backList=backList;
window.addS=addS;window.remS=remS;window.updS=updS;window.logEx=logEx;
window.closeMod=closeMod;window.ovClick=ovClick;

render();
})();
</script>
</body>
</html>
